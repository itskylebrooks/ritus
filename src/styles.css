/* Load IBM Plex Sans locally from public/fonts (woff2). Do NOT use Google Fonts.
   Files are expected in /public/fonts as IBMPlexSans.woff2 and IBMPlexSans-Italic.woff2 */
@font-face {
  font-family: 'IBM Plex Sans';
  src: url('/fonts/IBMPlexSans.woff2') format('woff2');
  font-weight: 400;
  font-style: normal;
  font-display: swap;
}
@font-face {
  font-family: 'IBM Plex Sans';
  src: url('/fonts/IBMPlexSans-Italic.woff2') format('woff2');
  font-weight: 400;
  font-style: italic;
  font-display: swap;
}

@tailwind base;
@tailwind components;
@tailwind utilities;

/* Make IBM Plex Sans the default font across the entire app. */
html, body, #root {
  font-family: 'IBM Plex Sans', ui-sans-serif, system-ui, -apple-system, "Segoe UI", Roboto, "Helvetica Neue", Arial, "Noto Sans", sans-serif;
}

/* Smooth fonts */
html { -webkit-font-smoothing: antialiased; -moz-osx-font-smoothing: grayscale; }

/* Disable all CSS animations/transitions on initial load; removed after mount */
.preload *, .preload *::before, .preload *::after { 
  transition: none !important; 
  animation: none !important; 
}

/* Motion tokens: centralize page-switch timing and easing so transitions are consistent */
:root {
	--motion-page-duration: .32s; /* standard duration for page switching */
	--motion-page-ease: cubic-bezier(.4,0,.2,1);
}

/* Page & element transition helpers */
@keyframes fadeInMove {
	from { opacity: 0; transform: translateY(8px); }
	to { opacity: 1; transform: translateY(0); }
}
@keyframes fadeSwap {
	from { opacity: 0; transform: translateX(6px); }
	to { opacity: 1; transform: translateX(0); }
}
.animate-fadeInMove { animation: fadeInMove var(--motion-page-duration) var(--motion-page-ease) both; }
.animate-fadeSwap { animation: fadeSwap var(--motion-page-duration) var(--motion-page-ease) both; }

@keyframes fadeOut { from { opacity:1; } to { opacity:0; } }

/* Guide step transitions */
@keyframes guideEnterForward { from { opacity:0; transform:translateX(26px) scale(.985); } to { opacity:1; transform:translateX(0) scale(1); } }
@keyframes guideExitForward { from { opacity:1; transform:translateX(0) scale(1); } to { opacity:0; transform:translateX(-24px) scale(.985); } }
@keyframes guideEnterBack { from { opacity:0; transform:translateX(-26px) scale(.985); } to { opacity:1; transform:translateX(0) scale(1); } }
@keyframes guideExitBack { from { opacity:1; transform:translateX(0) scale(1); } to { opacity:0; transform:translateX(24px) scale(.985); } }
.guide-step-layer { position:absolute; inset:0; }
.guide-step-enter-forward { animation: guideEnterForward .28s cubic-bezier(.4,0,.2,1); }
.guide-step-exit-forward { animation: guideExitForward .22s cubic-bezier(.4,0,.55,1) forwards; }
.guide-step-enter-back { animation: guideEnterBack .28s cubic-bezier(.4,0,.2,1); }
.guide-step-exit-back { animation: guideExitBack .22s cubic-bezier(.4,0,.55,1) forwards; }

/* Settings modal animations (overlay + panel) */
@keyframes settingsIn { from { opacity:0; transform:translateY(24px) scale(.96);} to { opacity:1; transform:translateY(0) scale(1);} }
@keyframes settingsOut { from { opacity:1; transform:translateY(0) scale(1);} to { opacity:0; transform:translateY(26px) scale(.95);} }
.settings-overlay { animation: fadeInMove var(--motion-page-duration) var(--motion-page-ease) both; }
.settings-overlay.closing { animation: fadeOut .28s cubic-bezier(.4,0,.6,1) forwards; }
.settings-panel { animation: settingsIn .42s cubic-bezier(.4,0,.2,1); }
.settings-panel.closing { animation: settingsOut .28s cubic-bezier(.4,0,.6,1) forwards; }

/* Small utility for fade/slide used elsewhere */
@keyframes fadeSlide { from { opacity:0; transform:translateY(4px); } to { opacity:1; transform:translateY(0); } }
.fade-slide { animation: fadeSlide .35s ease both; }

/* Habit animations */
@keyframes habitAdd {
  from { opacity: 0; transform: scale(0.9); }
  to { opacity: 1; transform: scale(1); }
}

@keyframes habitRemove {
  from { opacity: 1; transform: scale(1); }
  to { opacity: 0; transform: scale(0.9); }
}

.habit-add {
  animation: habitAdd 0.3s ease-out forwards;
}

.habit-remove {
  animation: habitRemove 0.3s ease-in forwards;
}

/* Header-specific button visuals
   - Targets only header page links and the desktop "More" button (by attribute)
   - Provides a neutral grey hover, smooth transitions, slight elevation via shadow only
   - Active page buttons are color-inverted (no frame) and accessible in both themes
   - Desktop "More" button border matches app frame colors used elsewhere
   NOTE: Selectors avoid touching dropdown menu items and mobile menu controls.
*/
header nav > ul > li > a,
header button[aria-haspopup="menu"] {
  transition: background-color .18s var(--motion-page-ease),
              color .18s var(--motion-page-ease),
              box-shadow .18s var(--motion-page-ease),
              border-color .18s var(--motion-page-ease);
  background-color: transparent;
  color: inherit; /* icons use currentColor */
  padding: .5rem .75rem; /* match existing page button spacing */
  font-size: .875rem; /* text-sm equivalent */
  min-height: 36px; /* keep consistent sizing */
  display: inline-flex;
  align-items: center;
  gap: .5rem;
}

/* Hover: subtle neutral grey â€” light mode keeps same bg but removes shadow; dark mode is darker than frame */
header nav > ul > li > a:hover,
header button[aria-haspopup="menu"]:hover {
  background-color: #f4f4f5; /* requested light-mode hover */
  box-shadow: none; /* remove hover shadow in light mode per request */
}

/* Dark mode hover: darker than the frame (use neutral-900) to provide stronger contrast */
.dark header nav > ul > li > a:hover,
.dark header button[aria-haspopup="menu"]:hover {
  background-color: #1f1f1f; /* requested dark-mode hover */
  box-shadow: 0 6px 14px rgba(2,6,23,0.36);
}

/* Active page button: inverted colors, no frame
   - Light mode: black bg, white text/icon
   - Dark mode: white bg, black text/icon
   Use aria-current="page" because NavLink sets that for active route.
*/
header nav > ul > li > a[aria-current="page"] {
  border-color: transparent !important;
  box-shadow: none;
}

/* Restore inverted active appearance for desktop page buttons
   - Light mode: black bg, white text
   - Dark mode: white bg, black text
   Also set hover for the active button to use the inverted system hover colors:
   - Light active hover -> dark hover (#1f1f1f)
   - Dark active hover -> light hover (#f4f4f5)
*/
header nav > ul > li > a[aria-current="page"] {
  background-color: #000; /* light-mode active: black */
  color: #fff;
}
.dark header nav > ul > li > a[aria-current="page"] {
  background-color: #fff; /* dark-mode active: white */
  color: #000;
}

header nav > ul > li > a[aria-current="page"]:hover {
  /* Active hovered in light mode: use inverted (dark) hover */
  background-color: #1f1f1f;
}
.dark header nav > ul > li > a[aria-current="page"]:hover {
  /* Active hovered in dark mode: use inverted (light) hover */
  background-color: #f4f4f5;
}

/* Ensure icons inherit the text color when a page is active */
header nav > ul > li > a[aria-current="page"] svg {
  color: inherit;
}

/* Desktop More button: match the app frame colors used elsewhere
   - Light: neutral-300-ish frame
   - Dark: neutral-700-ish frame
*/
header button[aria-haspopup="menu"] {
  background-clip: padding-box;
}